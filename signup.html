<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DevTravels</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <link rel="stylesheet" href="css/signup.css">
</head>

<body>

  <div class="login">

    <div class="loginmodal">
      <h2>
        Welcome to family :)
      </h2>
      <form id="myForm">
        <input type="text" id="name" placeholder="Enter your name" minlength="4" required/>
        <input type="email" id="email" placeholder="Enter your email" required/>
        <input type="password" id="password" placeholder="Enter your password" minlength="6" required/>
        <p class="text-center text-success" id="warning"></p>

        <input type="submit" class="button" id="signup" value="sign up" />
        <a href="index.html">Already a user?</a>
      </form>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
    crossorigin="anonymous"></script>
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics.js";
    import { getAuth, onAuthStateChanged, signOut, signInWithEmailAndPassword, updatePassword, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
    import { getDatabase, ref as dRef, set, get, child, update, push, remove } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyC0aq5bOk4XaSt88ZZ07PSAoslmUSkkQvA",
      authDomain: "devrevs.firebaseapp.com",
      databaseURL: "https://devrevs-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "devrevs",
      storageBucket: "devrevs.appspot.com",
      messagingSenderId: "766013496767",
      appId: "1:766013496767:web:908755e2328056adead50a",
      measurementId: "G-V23KVPT9T3"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const analytics = getAnalytics(app);

    const form = document.getElementById("myForm");
    form.addEventListener("submit", createNewUser);

    function createNewUser(event){
      event.preventDefault();
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      const name = document.getElementById("name").value;
      createUserWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
          window.location = "index.html";
        })
        .catch((error) => {
          const errorCode = error.code;
          const errorMessage = error.message;
          alert("user already exists");
        });
    }
  </script>
</body>

</html>